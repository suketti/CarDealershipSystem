<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autó Részletei</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo"><a href="#">Autókereskedés</a></h1>
            <nav>
                <ul>
                    <li><a href="kezdolap.html">Kezdőlap</a></li>
                    <li><a href="autok.html">Autók</a></li>
                    <li><a href="#">Szolgáltatások</a></li>
                    <li><a href="#">Kapcsolat</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <section class="car-details">
        <img id="car-image" alt="Autó képe">
        <div class="details">
            <h2 id="car-title"></h2>
            <p id="car-price"></p>
            <p id="car-year"></p>
            <p id="car-type"></p>
            <p id="car-fuel"></p>
            <p class="description" id="car-description"></p>
            <a href="kezdolap.html" class="btn-back">Vissza a Kezdőlapra</a>

            <!-- Időpont foglaló űrlap -->
            <div class="calendar-container">
                <h3>Időpont foglalása</h3>
                <div class="date-picker">
                    <label for="year">Év:</label>
                    <select id="year"></select>
            
                    <label for="month">Hónap:</label>
                    <select id="month"></select>
            
                    <label for="day">Nap:</label>
                    <select id="day"></select>
                </div>
                <div class="time-picker">
                    <label for="hours">Óra:</label>
                    <select id="hours"></select>
            
                    <label for="minutes">Perc:</label>
                    <select id="minutes"></select>
                </div>
                <button type="button" class="btn-submit">Foglalás</button>
                <p id="booking-message" style="margin-top: 20px; font-weight: bold;"></p>
            </div>
        </div>
    </section>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Autó adatainak betöltése
            const params = new URLSearchParams(window.location.search);
            const carData = JSON.parse(params.get("car"));

            if (carData) {
                document.getElementById("car-title").textContent = `${carData.marka} ${carData.modell}`;
                document.getElementById("car-image").src = carData.kep;
                document.getElementById("car-price").textContent = `Ár: ${carData.ar.toLocaleString()} Ft`;
                document.getElementById("car-year").textContent = `Évjárat: ${carData.ev}`;
                document.getElementById("car-type").textContent = `Kivitel: ${carData.kivitel}`;
                document.getElementById("car-fuel").textContent = `Üzemanyag: ${carData.uzemanyag}`;
                document.getElementById("car-description").textContent = carData.leiras || "Nincs leírás az autóról.";
            }

            
            const yearSelect = document.getElementById("year");
        const monthSelect = document.getElementById("month");
        const daySelect = document.getElementById("day");
        const hoursSelect = document.getElementById("hours");
        const minutesSelect = document.getElementById("minutes");
        const bookingMessage = document.getElementById("booking-message");
        const submitButton = document.querySelector(".btn-submit");

        // Dátumválasztók feltöltése
        function populateDatePickers() {
            const currentYear = new Date().getFullYear();

            // Évek feltöltése
            for (let year = currentYear; year <= currentYear + 5; year++) {
                const option = document.createElement("option");
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            }

            // Hónapok feltöltése
            for (let month = 0; month < 12; month++) {
                const option = document.createElement("option");
                option.value = month;
                option.textContent = new Intl.DateTimeFormat('hu', { month: 'long' }).format(new Date(0, month));
                monthSelect.appendChild(option);
            }

            // Napok frissítése
            updateDays();
        }

        // Napok frissítése az aktuális év és hónap alapján
        function updateDays() {
            daySelect.innerHTML = ""; // Napok törlése
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);

            const daysInMonth = new Date(year, month + 1, 0).getDate();
            for (let day = 1; day <= daysInMonth; day++) {
                const option = document.createElement("option");
                option.value = day;
                option.textContent = day;
                daySelect.appendChild(option);
            }
        }

        // Időválasztó feltöltése
        function populateTimePickers() {
            for (let hour = 0; hour < 24; hour++) {
                const option = document.createElement("option");
                option.value = hour;
                option.textContent = hour.toString().padStart(2, "0");
                hoursSelect.appendChild(option);
            }

            for (let minute = 0; minute < 60; minute++) {
                const option = document.createElement("option");
                option.value = minute;
                option.textContent = minute.toString().padStart(2, "0");
                minutesSelect.appendChild(option);
            }
        }

        // Események figyelése
        yearSelect.addEventListener("change", updateDays);
        monthSelect.addEventListener("change", updateDays);

        // Foglalás kezelése
        submitButton.addEventListener("click", () => {
            const year = yearSelect.value;
            const month = parseInt(monthSelect.value) + 1; // Hónapok 0-indexeltek
            const day = daySelect.value;
            const hours = hoursSelect.value;
            const minutes = minutesSelect.value;

            const bookingDate = `${year}-${month.toString().padStart(2, "0")}-${day.toString().padStart(2, "0")} ${hours.toString().padStart(2, "0")}:${minutes.toString().padStart(2, "0")}`;
            bookingMessage.textContent = `Sikeresen foglalt időpontot: ${bookingDate}`;
        });

        // Kezdeti feltöltés
        populateDatePickers();
        populateTimePickers();
    
        });
    </script>
</body>
</html>
